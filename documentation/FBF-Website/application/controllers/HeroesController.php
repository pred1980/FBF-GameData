<?phprequire_once 'Zend/Controller/Action.php';class HeroesController extends Zend_Controller_Action{    protected $_heroModel = null;        protected $_spellsModel = null;        protected $_itemModel = null;        public function init()    {        $this->_heroModel = new Default_Model_Heroes();        $this->_spellsModel = New Default_Model_Spells();        $this->_itemModel = new Default_Model_Items();                //add js+css        $this->view->headLink()->appendStylesheet($this->view->baseUrl().'/files/frontend/css/items.css');        $this->view->headLink()->appendStylesheet($this->view->baseUrl().'/files/frontend/css/heroes.css');        $this->view->headScript()->appendFile($this->view->baseUrl().'/files/frontend/js/jScrollbar.jquery.js', 'text/javascript');        $this->view->headScript()->appendFile($this->view->baseUrl().'/files/frontend/js/jquery-ui-1.8.16.custom.min.js', 'text/javascript');        $this->view->headScript()->appendFile($this->view->baseUrl().'/files/frontend/js/jquery-mousewheel.js', 'text/javascript');        $this->view->headScript()->appendFile($this->view->baseUrl().'/files/frontend/js/heroes.js', 'text/javascript');    }        public function indexAction()    {        //set Title        $this->view->headTitle('FBF Heroes');                //set keywords for the heroes site        $this->view->placeholder('keywords')->set("FBF heroes, heroes of FBF, forsaken heroes, coalition heroes, Forsaken Bastion's Fall, forsaken-bastions-fall.com");                   //set description for the heroes site        $this->view->placeholder('description')->set("FBF Heroes - Check out the complete list of all FBF Heroes. Find your favorite Hero and join our FBF Community.");                //Facebook        $this->view->placeholder('fb-summary')->set("FBF Heroes - Check out the complete list of all FBF Heroes. Find your favorite Hero and join our FBF Community.");        $this->view->placeholder('fb-image')->set(urlencode($this->view->serverUrl().'/files/frontend/img/enUS/misc/facebook-heroes.jpg'));                //get forsaken and coalition informations to show thumbnails        $data = array('name', 'fname', 'image', 'affilation');        $this->view->forsakenHeroPreviewImages = $this->_heroModel->getHeroByAffilation('forsaken', $data ,'ID');        $this->view->coalitionHeroPreviewImages = $this->_heroModel->getHeroByAffilation('coalition', $data ,'ID');    }        public function herothumbsAction()    {        $this->view->heroThumbs = $this->getRequest()->getParams();    }        public function herodetailsAction()    {        $request = Zend_Controller_Front::getInstance()->getRequest();        //get url friendly heroName        $heroData = $this->_heroModel->getHeroByFriendlyName($request->getParam('heroName'));        //get hero id        $heroId = $this->_heroModel->getHeroId($heroData[0]['name']);        //get hero changelog        $this->view->changelog = $this->_heroModel->getHeroChangelog($heroId[0]['ID']);        //get hero spell data        $spellData = $this->_spellsModel->getHeroSpellsByHeroID($heroData[0]['ID']);                $heroMediaModel = new Default_Model_Media();        $data = array('name', 'f-name');        $itemData = $this->_itemModel->getItemsByID($heroData[0]['item_ids'], $data);        $heroPictures = $heroMediaModel->getHeroMedia($heroId);        if (!empty($heroData) && !empty($spellData)) {            //give all Hero Details to the view            $this->view->heroDetails = $heroData;                        //give all Hero Spells to the view            $this->view->heroSpells = $spellData;                        //give all recommended Items of this Hero to the view            $this->view->heroItems = $itemData;                        //give all picture data of this hero to the view            $this->view->heroPictures = $heroPictures;                        //data for all other heroes in the Hero Menu (left)            $data = array('name', 'fname', 'image', 'affilation');            $this->view->forsakenHeroPreviewImages = $this->_heroModel->getHeroByAffilation('forsaken', $data ,'ID');            $this->view->coalitionHeroPreviewImages = $this->_heroModel->getHeroByAffilation('coalition', $data ,'ID');            //set Title of the Hero Detail Page            $this->view->headTitle('FBF Hero - '.$heroData[0]['name']);                        //set keywords for the heroes site            $this->view->placeholder('keywords')->set($heroData[0]['meta_keywords']);                       //set description for the heroes site            $this->view->placeholder('description')->set($heroData[0]['meta_description']);        }        else {            // redirect to heroes main page if someone enters an incorrect hero-name-url            $this->_redirect('/heroes');            return;        }    }        public function previewboxAction()    {        $this->_helper->layout->disableLayout();        $request = $this->getRequest()->getParams();        $heroData = $this->_heroModel->getHeroByName($request['name']);                $this->view->previewHeroData = $this->_heroModel->getHeroByName($request['name']);        $heroId = $this->_heroModel->getHeroId($request['name']);        $this->view->previewAbiData = $this->_spellsModel->getAbillityTypes($heroId);        $this->view->changelog = $this->_heroModel->getHeroChangelog($heroId);                $data = array('name', 'f-name');        $itemData = $this->_itemModel->getItemsByID($heroData[0]['item_ids'], $data);        //give all recommended Items of this Hero to the view
        $this->view->heroItems = $itemData;    }}